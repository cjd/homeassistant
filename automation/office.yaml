- alias: Office light
  id: office_light
  trigger:
  - entity_id: sensor.office_dimmer_action
    platform: state
  condition: []
  action:
  - entity_id: switch.office_speaker
    service_template: >
        {% if trigger.to_state.state == 'on-press' %}switch.turn_on
        {% elif trigger.to_state.state == 'up-press' %}switch.turn_on
        {% elif trigger.to_state.state == 'down-press' %}switch.turn_off
        {% elif trigger.to_state.state == 'off-press' %}switch.turn_off
        {% else %}script.noop
        {% endif %}
  - entity_id: light.office_light
    service_template: >
        {% if trigger.to_state.state|length %}light.turn_on
        {% else %}script.noop
        {% endif %}
    data_template:
      brightness_pct: >
        {% if trigger.to_state.state == 'on-press' %}100
        {% elif trigger.to_state.state == 'up-press' %} 50
        {% elif trigger.to_state.state == 'down-press' %}1
        {% elif trigger.to_state.state == 'off-press' %}0
        {% endif %}
